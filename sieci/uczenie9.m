%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.310472e+003; foe(n+1)=2.475191e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.553467e+003; foe(n+1)=1.738066e+003; krok(n+1)=4.576195e-004; ng(n+1)=3.403998e+003;
n=2; farx(n+1)=5.606919e+002; foe(n+1)=8.047284e+002; krok(n+1)=2.531421e-003; ng(n+1)=1.804437e+003;
n=3; farx(n+1)=6.073072e+002; foe(n+1)=6.549999e+002; krok(n+1)=1.539526e-004; ng(n+1)=6.242984e+003;
n=4; farx(n+1)=1.059680e+003; foe(n+1)=5.099720e+002; krok(n+1)=1.203191e-003; ng(n+1)=7.664043e+003;
n=5; farx(n+1)=8.217118e+002; foe(n+1)=4.638648e+002; krok(n+1)=5.320104e-003; ng(n+1)=6.285795e+002;
n=6; farx(n+1)=4.375439e+002; foe(n+1)=3.747011e+002; krok(n+1)=3.868579e-003; ng(n+1)=2.084785e+003;
n=7; farx(n+1)=3.162908e+002; foe(n+1)=3.563499e+002; krok(n+1)=3.467612e-004; ng(n+1)=2.278353e+003;
n=8; farx(n+1)=2.681880e+002; foe(n+1)=3.361303e+002; krok(n+1)=1.205116e-004; ng(n+1)=4.465897e+003;
n=9; farx(n+1)=2.533019e+002; foe(n+1)=3.290248e+002; krok(n+1)=9.780005e-004; ng(n+1)=1.953220e+003;
n=10; farx(n+1)=2.301230e+002; foe(n+1)=3.239520e+002; krok(n+1)=3.726829e-003; ng(n+1)=1.095398e+003;
n=11; farx(n+1)=2.102222e+002; foe(n+1)=3.174531e+002; krok(n+1)=3.683227e-003; ng(n+1)=9.373197e+002;
n=12; farx(n+1)=1.809016e+002; foe(n+1)=3.070815e+002; krok(n+1)=3.621201e-003; ng(n+1)=1.486029e+003;
n=13; farx(n+1)=1.724989e+002; foe(n+1)=3.009260e+002; krok(n+1)=1.603465e-003; ng(n+1)=9.686832e+002;
n=14; farx(n+1)=1.452747e+002; foe(n+1)=2.780841e+002; krok(n+1)=2.973498e-003; ng(n+1)=2.982511e+003;
n=15; farx(n+1)=1.026983e+002; foe(n+1)=2.559619e+002; krok(n+1)=4.966995e-004; ng(n+1)=3.623744e+003;
n=16; farx(n+1)=7.956043e+001; foe(n+1)=2.434868e+002; krok(n+1)=7.854526e-004; ng(n+1)=2.599955e+003;
n=17; farx(n+1)=6.999872e+001; foe(n+1)=2.322484e+002; krok(n+1)=2.106662e-003; ng(n+1)=3.240920e+003;
n=18; farx(n+1)=5.793202e+001; foe(n+1)=2.176585e+002; krok(n+1)=3.187345e-003; ng(n+1)=2.648264e+003;
n=19; farx(n+1)=5.156648e+001; foe(n+1)=2.056137e+002; krok(n+1)=5.259880e-004; ng(n+1)=5.587617e+003;
n=20; farx(n+1)=4.808088e+001; foe(n+1)=1.936389e+002; krok(n+1)=9.546530e-004; ng(n+1)=4.925776e+003;
n=21; farx(n+1)=4.380380e+001; foe(n+1)=1.853511e+002; krok(n+1)=8.258271e-004; ng(n+1)=2.292263e+003;
n=22; farx(n+1)=4.248735e+001; foe(n+1)=1.797113e+002; krok(n+1)=1.736749e-004; ng(n+1)=3.921896e+003;
n=23; farx(n+1)=4.128038e+001; foe(n+1)=1.775854e+002; krok(n+1)=1.040544e-003; ng(n+1)=2.747533e+003;
n=24; farx(n+1)=3.995343e+001; foe(n+1)=1.740732e+002; krok(n+1)=3.604935e-004; ng(n+1)=6.259929e+003;
n=25; farx(n+1)=3.397456e+001; foe(n+1)=1.584479e+002; krok(n+1)=1.305012e-002; ng(n+1)=5.995754e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=3.416584e+001; foe(n+1)=1.552702e+002; krok(n+1)=1.125778e-006; ng(n+1)=6.906111e+003;
n=27; farx(n+1)=3.524851e+001; foe(n+1)=1.309352e+002; krok(n+1)=7.432247e-005; ng(n+1)=2.329122e+003;
n=28; farx(n+1)=3.085528e+001; foe(n+1)=1.171755e+002; krok(n+1)=7.303192e-005; ng(n+1)=2.104243e+003;
n=29; farx(n+1)=2.861552e+001; foe(n+1)=1.138140e+002; krok(n+1)=4.576195e-004; ng(n+1)=2.466579e+003;
n=30; farx(n+1)=2.976764e+001; foe(n+1)=1.105918e+002; krok(n+1)=3.423805e-004; ng(n+1)=3.476475e+003;
n=31; farx(n+1)=3.022231e+001; foe(n+1)=1.045923e+002; krok(n+1)=9.303493e-004; ng(n+1)=4.524200e+003;
n=32; farx(n+1)=2.739408e+001; foe(n+1)=9.551803e+001; krok(n+1)=2.456077e-003; ng(n+1)=1.826871e+003;
n=33; farx(n+1)=2.690762e+001; foe(n+1)=9.182380e+001; krok(n+1)=2.050616e-003; ng(n+1)=2.667104e+003;
n=34; farx(n+1)=2.574220e+001; foe(n+1)=8.691952e+001; krok(n+1)=1.597856e-003; ng(n+1)=5.637103e+002;
n=35; farx(n+1)=2.547784e+001; foe(n+1)=8.623457e+001; krok(n+1)=2.337468e-004; ng(n+1)=2.035810e+003;
n=36; farx(n+1)=2.398747e+001; foe(n+1)=8.198934e+001; krok(n+1)=2.176307e-003; ng(n+1)=9.159238e+002;
n=37; farx(n+1)=1.992507e+001; foe(n+1)=7.562540e+001; krok(n+1)=3.572423e-003; ng(n+1)=7.179950e+002;
n=38; farx(n+1)=1.709081e+001; foe(n+1)=6.924492e+001; krok(n+1)=1.548346e-003; ng(n+1)=1.265671e+003;
n=39; farx(n+1)=1.595015e+001; foe(n+1)=6.669445e+001; krok(n+1)=7.394073e-004; ng(n+1)=2.944507e+003;
n=40; farx(n+1)=1.377908e+001; foe(n+1)=6.060583e+001; krok(n+1)=1.704775e-003; ng(n+1)=1.693761e+003;
n=41; farx(n+1)=1.224062e+001; foe(n+1)=5.765711e+001; krok(n+1)=2.415320e-003; ng(n+1)=2.866899e+003;
n=42; farx(n+1)=1.196312e+001; foe(n+1)=5.694184e+001; krok(n+1)=7.394073e-004; ng(n+1)=4.429805e+003;
n=43; farx(n+1)=1.107405e+001; foe(n+1)=5.202868e+001; krok(n+1)=8.160960e-004; ng(n+1)=4.515803e+003;
n=44; farx(n+1)=1.040754e+001; foe(n+1)=4.855210e+001; krok(n+1)=1.892781e-003; ng(n+1)=4.383794e+003;
n=45; farx(n+1)=1.032267e+001; foe(n+1)=4.703878e+001; krok(n+1)=1.093065e-003; ng(n+1)=5.412243e+003;
n=46; farx(n+1)=1.039665e+001; foe(n+1)=4.527237e+001; krok(n+1)=3.941672e-003; ng(n+1)=4.722578e+003;
n=47; farx(n+1)=9.410471e+000; foe(n+1)=4.303963e+001; krok(n+1)=3.671029e-003; ng(n+1)=6.051785e+003;
n=48; farx(n+1)=7.467874e+000; foe(n+1)=3.911384e+001; krok(n+1)=7.772060e-003; ng(n+1)=3.578164e+003;
n=49; farx(n+1)=6.633265e+000; foe(n+1)=3.498197e+001; krok(n+1)=4.445667e-003; ng(n+1)=5.581139e+003;
n=50; farx(n+1)=6.764424e+000; foe(n+1)=3.242757e+001; krok(n+1)=6.884742e-003; ng(n+1)=3.322617e+003;
%odnowa zmiennej metryki
n=51; farx(n+1)=6.537834e+000; foe(n+1)=3.158475e+001; krok(n+1)=4.562773e-006; ng(n+1)=2.106598e+003;
n=52; farx(n+1)=6.231136e+000; foe(n+1)=2.786531e+001; krok(n+1)=1.636503e-005; ng(n+1)=2.195498e+003;
n=53; farx(n+1)=6.793423e+000; foe(n+1)=2.512407e+001; krok(n+1)=1.767236e-004; ng(n+1)=6.126443e+002;
n=54; farx(n+1)=6.395117e+000; foe(n+1)=2.130089e+001; krok(n+1)=2.516773e-004; ng(n+1)=6.400286e+002;
n=55; farx(n+1)=6.353762e+000; foe(n+1)=2.078593e+001; krok(n+1)=9.579321e-005; ng(n+1)=6.018699e+002;
n=56; farx(n+1)=6.327968e+000; foe(n+1)=1.982228e+001; krok(n+1)=1.915864e-004; ng(n+1)=1.251697e+003;
n=57; farx(n+1)=5.846271e+000; foe(n+1)=1.697200e+001; krok(n+1)=8.336543e-004; ng(n+1)=1.629879e+003;
n=58; farx(n+1)=5.479714e+000; foe(n+1)=1.370074e+001; krok(n+1)=8.989513e-004; ng(n+1)=1.891192e+003;
n=59; farx(n+1)=5.207248e+000; foe(n+1)=1.056391e+001; krok(n+1)=2.990450e-003; ng(n+1)=2.504840e+003;
n=60; farx(n+1)=5.126209e+000; foe(n+1)=8.477357e+000; krok(n+1)=7.354218e-003; ng(n+1)=1.837292e+003;
n=61; farx(n+1)=3.866019e+000; foe(n+1)=6.744188e+000; krok(n+1)=9.409526e-003; ng(n+1)=2.694664e+002;
n=62; farx(n+1)=3.556030e+000; foe(n+1)=6.392572e+000; krok(n+1)=1.587460e-003; ng(n+1)=7.604775e+002;
n=63; farx(n+1)=3.019701e+000; foe(n+1)=5.657666e+000; krok(n+1)=6.273397e-003; ng(n+1)=4.044477e+002;
n=64; farx(n+1)=2.677975e+000; foe(n+1)=5.118914e+000; krok(n+1)=4.049572e-003; ng(n+1)=1.314152e+003;
n=65; farx(n+1)=2.372221e+000; foe(n+1)=4.567960e+000; krok(n+1)=8.751130e-003; ng(n+1)=4.472774e+002;
n=66; farx(n+1)=2.173196e+000; foe(n+1)=4.125615e+000; krok(n+1)=5.915528e-003; ng(n+1)=5.970535e+002;
n=67; farx(n+1)=2.026263e+000; foe(n+1)=3.959864e+000; krok(n+1)=7.321912e-003; ng(n+1)=5.240765e+002;
n=68; farx(n+1)=1.713752e+000; foe(n+1)=3.528519e+000; krok(n+1)=3.535818e-002; ng(n+1)=5.409840e+002;
n=69; farx(n+1)=1.622396e+000; foe(n+1)=3.360923e+000; krok(n+1)=4.312903e-003; ng(n+1)=1.143731e+003;
n=70; farx(n+1)=1.566534e+000; foe(n+1)=3.279210e+000; krok(n+1)=8.865514e-003; ng(n+1)=2.054499e+002;
n=71; farx(n+1)=1.487706e+000; foe(n+1)=3.138697e+000; krok(n+1)=1.305754e-002; ng(n+1)=5.566676e+002;
n=72; farx(n+1)=1.344968e+000; foe(n+1)=2.943141e+000; krok(n+1)=2.254943e-002; ng(n+1)=1.799393e+002;
n=73; farx(n+1)=1.229179e+000; foe(n+1)=2.860845e+000; krok(n+1)=1.479856e-002; ng(n+1)=8.157786e+002;
n=74; farx(n+1)=1.072452e+000; foe(n+1)=2.675704e+000; krok(n+1)=6.021814e-002; ng(n+1)=9.779694e+002;
n=75; farx(n+1)=9.884623e-001; foe(n+1)=2.490668e+000; krok(n+1)=2.900728e-002; ng(n+1)=7.339385e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=9.877694e-001; foe(n+1)=2.479450e+000; krok(n+1)=1.486491e-006; ng(n+1)=4.064619e+002;
n=77; farx(n+1)=9.810864e-001; foe(n+1)=2.457076e+000; krok(n+1)=1.812721e-005; ng(n+1)=1.890476e+002;
n=78; farx(n+1)=9.772889e-001; foe(n+1)=2.431693e+000; krok(n+1)=2.979031e-005; ng(n+1)=1.389162e+002;
n=79; farx(n+1)=9.768200e-001; foe(n+1)=2.427491e+000; krok(n+1)=6.158863e-005; ng(n+1)=4.812326e+001;
n=80; farx(n+1)=9.740262e-001; foe(n+1)=2.410753e+000; krok(n+1)=4.283128e-004; ng(n+1)=3.073213e+001;
n=81; farx(n+1)=9.325124e-001; foe(n+1)=2.309625e+000; krok(n+1)=3.225080e-003; ng(n+1)=2.914037e+001;
n=82; farx(n+1)=9.089371e-001; foe(n+1)=2.240181e+000; krok(n+1)=1.611746e-003; ng(n+1)=1.397646e+002;
n=83; farx(n+1)=9.100717e-001; foe(n+1)=2.220202e+000; krok(n+1)=8.540178e-004; ng(n+1)=2.866096e+002;
n=84; farx(n+1)=8.734147e-001; foe(n+1)=2.138164e+000; krok(n+1)=8.085176e-003; ng(n+1)=4.135063e+002;
n=85; farx(n+1)=8.098669e-001; foe(n+1)=2.056782e+000; krok(n+1)=5.381741e-003; ng(n+1)=5.402474e+002;
n=86; farx(n+1)=7.868460e-001; foe(n+1)=1.984470e+000; krok(n+1)=7.366454e-003; ng(n+1)=4.647348e+002;
n=87; farx(n+1)=7.382822e-001; foe(n+1)=1.906869e+000; krok(n+1)=1.525498e-002; ng(n+1)=9.165023e+001;
n=88; farx(n+1)=6.917990e-001; foe(n+1)=1.781228e+000; krok(n+1)=7.662549e-003; ng(n+1)=5.397042e+002;
n=89; farx(n+1)=6.765045e-001; foe(n+1)=1.666214e+000; krok(n+1)=1.184956e-002; ng(n+1)=2.574652e+002;
n=90; farx(n+1)=6.664854e-001; foe(n+1)=1.633919e+000; krok(n+1)=9.939766e-003; ng(n+1)=2.800621e+002;
n=91; farx(n+1)=6.603467e-001; foe(n+1)=1.587844e+000; krok(n+1)=4.938447e-003; ng(n+1)=4.687190e+002;
n=92; farx(n+1)=5.428825e-001; foe(n+1)=1.435450e+000; krok(n+1)=3.406610e-002; ng(n+1)=3.366560e+002;
n=93; farx(n+1)=4.590981e-001; foe(n+1)=1.225320e+000; krok(n+1)=2.191235e-002; ng(n+1)=3.654008e+002;
n=94; farx(n+1)=4.221885e-001; foe(n+1)=1.127795e+000; krok(n+1)=5.680993e-003; ng(n+1)=7.168672e+002;
n=95; farx(n+1)=3.990748e-001; foe(n+1)=1.049081e+000; krok(n+1)=7.399282e-003; ng(n+1)=3.905953e+002;
n=96; farx(n+1)=3.963601e-001; foe(n+1)=1.039510e+000; krok(n+1)=4.949772e-003; ng(n+1)=3.443745e+002;
n=97; farx(n+1)=3.618900e-001; foe(n+1)=9.592904e-001; krok(n+1)=4.356626e-002; ng(n+1)=2.484582e+002;
n=98; farx(n+1)=3.353135e-001; foe(n+1)=9.298311e-001; krok(n+1)=1.984224e-002; ng(n+1)=2.035307e+002;
n=99; farx(n+1)=2.960118e-001; foe(n+1)=8.579398e-001; krok(n+1)=4.981739e-002; ng(n+1)=7.348462e+002;
n=100; farx(n+1)=2.991988e-001; foe(n+1)=7.816288e-001; krok(n+1)=2.720095e-002; ng(n+1)=1.757718e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
