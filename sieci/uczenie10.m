%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.599859e+003; foe(n+1)=2.557308e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.846347e+003; foe(n+1)=1.769481e+003; krok(n+1)=5.112119e-004; ng(n+1)=3.611029e+003;
n=2; farx(n+1)=8.059086e+002; foe(n+1)=5.599461e+002; krok(n+1)=4.372259e-003; ng(n+1)=1.410039e+003;
n=3; farx(n+1)=8.966210e+002; foe(n+1)=5.117034e+002; krok(n+1)=3.003772e-004; ng(n+1)=2.267284e+003;
n=4; farx(n+1)=7.491980e+002; foe(n+1)=5.025840e+002; krok(n+1)=1.338974e-003; ng(n+1)=4.936884e+002;
n=5; farx(n+1)=4.401307e+002; foe(n+1)=3.837278e+002; krok(n+1)=4.270869e-003; ng(n+1)=1.444620e+003;
n=6; farx(n+1)=4.224707e+002; foe(n+1)=3.808141e+002; krok(n+1)=1.168734e-004; ng(n+1)=2.074879e+003;
n=7; farx(n+1)=3.254351e+002; foe(n+1)=3.603233e+002; krok(n+1)=1.810600e-003; ng(n+1)=2.223603e+003;
n=8; farx(n+1)=2.106342e+002; foe(n+1)=3.241737e+002; krok(n+1)=1.934772e-003; ng(n+1)=4.233371e+003;
n=9; farx(n+1)=1.772976e+002; foe(n+1)=3.187765e+002; krok(n+1)=6.277808e-004; ng(n+1)=1.979717e+003;
n=10; farx(n+1)=1.487267e+002; foe(n+1)=2.887825e+002; krok(n+1)=8.279108e-003; ng(n+1)=1.063698e+003;
n=11; farx(n+1)=1.454898e+002; foe(n+1)=2.864109e+002; krok(n+1)=7.519941e-005; ng(n+1)=1.693994e+003;
n=12; farx(n+1)=1.534184e+002; foe(n+1)=2.794709e+002; krok(n+1)=2.133311e-003; ng(n+1)=2.490033e+003;
n=13; farx(n+1)=1.639719e+002; foe(n+1)=2.719654e+002; krok(n+1)=2.275225e-003; ng(n+1)=1.203808e+003;
n=14; farx(n+1)=1.563518e+002; foe(n+1)=2.641511e+002; krok(n+1)=1.317301e-003; ng(n+1)=1.964318e+003;
n=15; farx(n+1)=1.275207e+002; foe(n+1)=2.482604e+002; krok(n+1)=4.788074e-003; ng(n+1)=9.725165e+002;
n=16; farx(n+1)=7.779586e+001; foe(n+1)=2.222093e+002; krok(n+1)=1.066152e-003; ng(n+1)=3.718133e+003;
n=17; farx(n+1)=5.268581e+001; foe(n+1)=2.076201e+002; krok(n+1)=4.034655e-004; ng(n+1)=1.213778e+004;
n=18; farx(n+1)=4.535786e+001; foe(n+1)=2.017208e+002; krok(n+1)=3.163070e-004; ng(n+1)=2.162341e+004;
n=19; farx(n+1)=3.825901e+001; foe(n+1)=1.942995e+002; krok(n+1)=4.835723e-004; ng(n+1)=2.466016e+004;
n=20; farx(n+1)=3.669378e+001; foe(n+1)=1.910229e+002; krok(n+1)=2.867210e-004; ng(n+1)=2.988474e+004;
n=21; farx(n+1)=3.564981e+001; foe(n+1)=1.873175e+002; krok(n+1)=5.465324e-004; ng(n+1)=2.742106e+004;
n=22; farx(n+1)=3.618591e+001; foe(n+1)=1.844489e+002; krok(n+1)=4.957630e-004; ng(n+1)=2.087141e+004;
n=23; farx(n+1)=3.602050e+001; foe(n+1)=1.781692e+002; krok(n+1)=2.018307e-003; ng(n+1)=1.581881e+004;
n=24; farx(n+1)=3.643027e+001; foe(n+1)=1.722683e+002; krok(n+1)=5.202484e-004; ng(n+1)=9.724850e+003;
n=25; farx(n+1)=3.813535e+001; foe(n+1)=1.618873e+002; krok(n+1)=1.051134e-004; ng(n+1)=1.601125e+004;
%odnowa zmiennej metryki
n=26; farx(n+1)=4.001087e+001; foe(n+1)=1.513140e+002; krok(n+1)=1.552186e-005; ng(n+1)=4.084299e+003;
n=27; farx(n+1)=4.074749e+001; foe(n+1)=1.465196e+002; krok(n+1)=8.118781e-007; ng(n+1)=1.208414e+004;
n=28; farx(n+1)=3.889927e+001; foe(n+1)=1.382957e+002; krok(n+1)=3.262026e-005; ng(n+1)=2.629058e+003;
n=29; farx(n+1)=3.558826e+001; foe(n+1)=1.026401e+002; krok(n+1)=1.186196e-004; ng(n+1)=2.716692e+003;
n=30; farx(n+1)=3.495757e+001; foe(n+1)=9.306648e+001; krok(n+1)=3.149159e-004; ng(n+1)=4.354581e+003;
n=31; farx(n+1)=2.894568e+001; foe(n+1)=7.689650e+001; krok(n+1)=8.220641e-004; ng(n+1)=9.547796e+003;
n=32; farx(n+1)=2.536645e+001; foe(n+1)=6.695881e+001; krok(n+1)=5.081655e-004; ng(n+1)=1.020047e+004;
n=33; farx(n+1)=1.958053e+001; foe(n+1)=5.367525e+001; krok(n+1)=1.797919e-003; ng(n+1)=4.181298e+003;
n=34; farx(n+1)=1.303773e+001; foe(n+1)=4.163703e+001; krok(n+1)=2.262638e-003; ng(n+1)=6.792891e+003;
n=35; farx(n+1)=9.096632e+000; foe(n+1)=3.328382e+001; krok(n+1)=5.263121e-004; ng(n+1)=4.137806e+003;
n=36; farx(n+1)=8.153399e+000; foe(n+1)=3.038923e+001; krok(n+1)=7.878882e-004; ng(n+1)=4.789712e+003;
n=37; farx(n+1)=6.992619e+000; foe(n+1)=2.825246e+001; krok(n+1)=9.481985e-004; ng(n+1)=1.152653e+003;
n=38; farx(n+1)=2.228269e+000; foe(n+1)=1.509226e+001; krok(n+1)=5.107684e-003; ng(n+1)=3.192029e+003;
n=39; farx(n+1)=1.875779e+000; foe(n+1)=1.364825e+001; krok(n+1)=3.831728e-004; ng(n+1)=2.490204e+003;
n=40; farx(n+1)=1.299620e+000; foe(n+1)=1.052409e+001; krok(n+1)=1.505777e-003; ng(n+1)=2.589327e+003;
n=41; farx(n+1)=1.086892e+000; foe(n+1)=9.642967e+000; krok(n+1)=1.227122e-003; ng(n+1)=1.357917e+003;
n=42; farx(n+1)=1.048599e+000; foe(n+1)=9.073566e+000; krok(n+1)=1.694223e-003; ng(n+1)=3.237745e+003;
n=43; farx(n+1)=9.578706e-001; foe(n+1)=8.363698e+000; krok(n+1)=1.002232e-003; ng(n+1)=1.733665e+003;
n=44; farx(n+1)=8.753893e-001; foe(n+1)=6.853702e+000; krok(n+1)=6.884472e-003; ng(n+1)=9.797117e+002;
n=45; farx(n+1)=8.085992e-001; foe(n+1)=5.925549e+000; krok(n+1)=1.651908e-003; ng(n+1)=3.696569e+003;
n=46; farx(n+1)=7.580141e-001; foe(n+1)=4.929910e+000; krok(n+1)=2.998733e-003; ng(n+1)=1.211083e+003;
n=47; farx(n+1)=6.475211e-001; foe(n+1)=4.296534e+000; krok(n+1)=6.130766e-003; ng(n+1)=6.057446e+002;
n=48; farx(n+1)=5.851603e-001; foe(n+1)=4.015178e+000; krok(n+1)=5.999763e-003; ng(n+1)=1.457304e+003;
n=49; farx(n+1)=5.043834e-001; foe(n+1)=3.654413e+000; krok(n+1)=4.753051e-003; ng(n+1)=5.791814e+002;
n=50; farx(n+1)=4.981963e-001; foe(n+1)=3.487982e+000; krok(n+1)=6.293742e-003; ng(n+1)=9.181564e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=4.975091e-001; foe(n+1)=3.485472e+000; krok(n+1)=1.093371e-006; ng(n+1)=2.097152e+002;
n=52; farx(n+1)=4.951058e-001; foe(n+1)=3.475610e+000; krok(n+1)=1.038706e-005; ng(n+1)=1.603975e+002;
n=53; farx(n+1)=4.946850e-001; foe(n+1)=3.472452e+000; krok(n+1)=8.667355e-006; ng(n+1)=9.222801e+001;
n=54; farx(n+1)=4.902973e-001; foe(n+1)=3.147794e+000; krok(n+1)=1.106947e-003; ng(n+1)=9.588561e+001;
n=55; farx(n+1)=4.892110e-001; foe(n+1)=3.040691e+000; krok(n+1)=3.697205e-004; ng(n+1)=2.883848e+002;
n=56; farx(n+1)=4.985924e-001; foe(n+1)=2.685849e+000; krok(n+1)=1.358387e-003; ng(n+1)=4.318834e+002;
n=57; farx(n+1)=5.041743e-001; foe(n+1)=2.620449e+000; krok(n+1)=3.098339e-004; ng(n+1)=1.142957e+003;
n=58; farx(n+1)=5.664598e-001; foe(n+1)=2.394559e+000; krok(n+1)=1.772228e-003; ng(n+1)=1.210603e+003;
n=59; farx(n+1)=6.621129e-001; foe(n+1)=2.144182e+000; krok(n+1)=3.758503e-003; ng(n+1)=8.760271e+002;
n=60; farx(n+1)=5.426318e-001; foe(n+1)=1.967431e+000; krok(n+1)=1.169933e-002; ng(n+1)=1.211161e+002;
n=61; farx(n+1)=5.104273e-001; foe(n+1)=1.901822e+000; krok(n+1)=5.485375e-003; ng(n+1)=3.679452e+002;
n=62; farx(n+1)=4.965533e-001; foe(n+1)=1.869373e+000; krok(n+1)=3.677109e-003; ng(n+1)=1.973232e+002;
n=63; farx(n+1)=4.736597e-001; foe(n+1)=1.811574e+000; krok(n+1)=5.829338e-003; ng(n+1)=3.363363e+002;
n=64; farx(n+1)=4.577444e-001; foe(n+1)=1.781161e+000; krok(n+1)=2.553842e-003; ng(n+1)=7.587677e+002;
n=65; farx(n+1)=4.313609e-001; foe(n+1)=1.716021e+000; krok(n+1)=1.153579e-002; ng(n+1)=4.132373e+002;
n=66; farx(n+1)=4.132205e-001; foe(n+1)=1.601978e+000; krok(n+1)=5.711090e-003; ng(n+1)=4.016899e+002;
n=67; farx(n+1)=3.890041e-001; foe(n+1)=1.440249e+000; krok(n+1)=1.598198e-002; ng(n+1)=5.877020e+002;
n=68; farx(n+1)=3.844615e-001; foe(n+1)=1.395186e+000; krok(n+1)=1.217394e-003; ng(n+1)=8.771550e+002;
n=69; farx(n+1)=3.660094e-001; foe(n+1)=1.280117e+000; krok(n+1)=1.343762e-002; ng(n+1)=9.625249e+002;
n=70; farx(n+1)=3.437362e-001; foe(n+1)=1.156480e+000; krok(n+1)=1.254988e-002; ng(n+1)=4.711522e+002;
n=71; farx(n+1)=2.738253e-001; foe(n+1)=1.049989e+000; krok(n+1)=1.825465e-002; ng(n+1)=4.683942e+002;
n=72; farx(n+1)=2.451575e-001; foe(n+1)=9.880389e-001; krok(n+1)=2.564143e-003; ng(n+1)=8.640073e+002;
n=73; farx(n+1)=2.139635e-001; foe(n+1)=9.131506e-001; krok(n+1)=6.053639e-003; ng(n+1)=5.656998e+002;
n=74; farx(n+1)=1.957255e-001; foe(n+1)=7.998916e-001; krok(n+1)=9.436540e-003; ng(n+1)=9.857164e+002;
n=75; farx(n+1)=1.935316e-001; foe(n+1)=7.590216e-001; krok(n+1)=2.647020e-003; ng(n+1)=6.554307e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=1.932362e-001; foe(n+1)=7.382618e-001; krok(n+1)=4.007586e-007; ng(n+1)=9.818757e+002;
n=77; farx(n+1)=1.931662e-001; foe(n+1)=7.333743e-001; krok(n+1)=1.519196e-006; ng(n+1)=3.562175e+002;
n=78; farx(n+1)=1.936301e-001; foe(n+1)=7.002505e-001; krok(n+1)=3.782543e-005; ng(n+1)=1.465171e+002;
n=79; farx(n+1)=1.939084e-001; foe(n+1)=6.979336e-001; krok(n+1)=1.266631e-005; ng(n+1)=7.771018e+001;
n=80; farx(n+1)=1.913159e-001; foe(n+1)=6.780235e-001; krok(n+1)=3.604935e-004; ng(n+1)=4.623603e+001;
n=81; farx(n+1)=1.896234e-001; foe(n+1)=6.335593e-001; krok(n+1)=4.912716e-004; ng(n+1)=5.882123e+001;
n=82; farx(n+1)=1.901190e-001; foe(n+1)=6.216868e-001; krok(n+1)=9.232346e-004; ng(n+1)=1.384716e+002;
n=83; farx(n+1)=1.859947e-001; foe(n+1)=5.972083e-001; krok(n+1)=5.060913e-003; ng(n+1)=2.056690e+002;
n=84; farx(n+1)=1.569809e-001; foe(n+1)=5.501434e-001; krok(n+1)=4.935931e-003; ng(n+1)=2.741988e+002;
n=85; farx(n+1)=1.397154e-001; foe(n+1)=5.233685e-001; krok(n+1)=1.039581e-002; ng(n+1)=2.125343e+002;
n=86; farx(n+1)=1.318186e-001; foe(n+1)=5.145362e-001; krok(n+1)=2.983603e-003; ng(n+1)=2.996599e+002;
n=87; farx(n+1)=1.158612e-001; foe(n+1)=5.016190e-001; krok(n+1)=5.849663e-003; ng(n+1)=3.262683e+002;
n=88; farx(n+1)=8.446362e-002; foe(n+1)=4.696166e-001; krok(n+1)=7.932207e-003; ng(n+1)=4.077073e+002;
n=89; farx(n+1)=8.240347e-002; foe(n+1)=4.473738e-001; krok(n+1)=1.417782e-002; ng(n+1)=1.549243e+002;
n=90; farx(n+1)=7.967602e-002; foe(n+1)=4.415355e-001; krok(n+1)=4.658504e-003; ng(n+1)=1.936601e+002;
n=91; farx(n+1)=6.592804e-002; foe(n+1)=4.211729e-001; krok(n+1)=4.447430e-003; ng(n+1)=4.518511e+002;
n=92; farx(n+1)=5.913607e-002; foe(n+1)=4.123276e-001; krok(n+1)=7.032104e-003; ng(n+1)=2.400029e+002;
n=93; farx(n+1)=5.693618e-002; foe(n+1)=4.063393e-001; krok(n+1)=9.416683e-003; ng(n+1)=3.227426e+002;
n=94; farx(n+1)=5.557455e-002; foe(n+1)=3.831065e-001; krok(n+1)=3.943936e-002; ng(n+1)=2.980671e+002;
n=95; farx(n+1)=5.547288e-002; foe(n+1)=3.721910e-001; krok(n+1)=1.791379e-002; ng(n+1)=3.606599e+002;
n=96; farx(n+1)=5.592740e-002; foe(n+1)=3.520137e-001; krok(n+1)=2.262062e-002; ng(n+1)=6.818694e+002;
n=97; farx(n+1)=5.441009e-002; foe(n+1)=3.405931e-001; krok(n+1)=1.170476e-002; ng(n+1)=4.958999e+002;
n=98; farx(n+1)=5.467380e-002; foe(n+1)=3.259389e-001; krok(n+1)=5.829556e-003; ng(n+1)=2.790551e+002;
n=99; farx(n+1)=5.616118e-002; foe(n+1)=3.102395e-001; krok(n+1)=5.671128e-002; ng(n+1)=1.153866e+002;
n=100; farx(n+1)=5.663363e-002; foe(n+1)=3.057808e-001; krok(n+1)=3.485222e-003; ng(n+1)=5.673622e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
