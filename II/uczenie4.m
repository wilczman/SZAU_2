%uczenie predyktora oe
clear all;
n=0; farx(n+1)=2.673341e+003; foe(n+1)=2.739908e+003; wspucz(n+1)=0.000000e+000; ng(n+1)=0.000000e+000;
%odnowa zmiennej metryki
n=1; farx(n+1)=1.706114e+003; foe(n+1)=1.759973e+003; krok(n+1)=4.880790e-004; ng(n+1)=2.532070e+003;
n=2; farx(n+1)=6.298661e+002; foe(n+1)=6.704184e+002; krok(n+1)=3.625910e-003; ng(n+1)=1.092888e+003;
n=3; farx(n+1)=6.924060e+002; foe(n+1)=5.584487e+002; krok(n+1)=2.002680e-004; ng(n+1)=3.328840e+003;
n=4; farx(n+1)=1.007766e+003; foe(n+1)=5.074285e+002; krok(n+1)=1.212998e-003; ng(n+1)=3.242563e+003;
n=5; farx(n+1)=6.864897e+002; foe(n+1)=4.417699e+002; krok(n+1)=1.071180e-002; ng(n+1)=4.876583e+002;
n=6; farx(n+1)=5.242683e+002; foe(n+1)=4.016331e+002; krok(n+1)=8.989595e-004; ng(n+1)=1.194237e+003;
n=7; farx(n+1)=4.427120e+002; foe(n+1)=3.898375e+002; krok(n+1)=4.090422e-004; ng(n+1)=1.057818e+003;
n=8; farx(n+1)=4.083403e+002; foe(n+1)=3.793750e+002; krok(n+1)=2.288181e-003; ng(n+1)=1.515313e+003;
n=9; farx(n+1)=3.731285e+002; foe(n+1)=3.653459e+002; krok(n+1)=1.606327e-003; ng(n+1)=1.134157e+003;
n=10; farx(n+1)=3.507681e+002; foe(n+1)=3.588501e+002; krok(n+1)=3.108393e-003; ng(n+1)=9.162001e+002;
n=11; farx(n+1)=3.002548e+002; foe(n+1)=3.461315e+002; krok(n+1)=2.900728e-002; ng(n+1)=6.388413e+002;
n=12; farx(n+1)=2.861535e+002; foe(n+1)=3.437626e+002; krok(n+1)=1.345435e-003; ng(n+1)=7.860389e+002;
n=13; farx(n+1)=2.572762e+002; foe(n+1)=3.378580e+002; krok(n+1)=1.199953e-002; ng(n+1)=1.568394e+003;
n=14; farx(n+1)=2.358280e+002; foe(n+1)=3.326251e+002; krok(n+1)=2.359135e-003; ng(n+1)=2.198013e+003;
n=15; farx(n+1)=2.259721e+002; foe(n+1)=3.299904e+002; krok(n+1)=3.035901e-003; ng(n+1)=1.169703e+003;
n=16; farx(n+1)=2.257420e+002; foe(n+1)=3.244695e+002; krok(n+1)=1.594192e-002; ng(n+1)=1.105367e+003;
n=17; farx(n+1)=2.082586e+002; foe(n+1)=2.998472e+002; krok(n+1)=8.000730e-002; ng(n+1)=1.154024e+003;
n=18; farx(n+1)=2.248916e+002; foe(n+1)=2.807928e+002; krok(n+1)=9.921120e-003; ng(n+1)=2.520832e+003;
n=19; farx(n+1)=2.314133e+002; foe(n+1)=2.744302e+002; krok(n+1)=4.026836e-003; ng(n+1)=1.178005e+003;
n=20; farx(n+1)=2.322177e+002; foe(n+1)=2.683675e+002; krok(n+1)=2.191235e-002; ng(n+1)=1.288449e+003;
n=21; farx(n+1)=2.239860e+002; foe(n+1)=2.635484e+002; krok(n+1)=8.685192e-003; ng(n+1)=1.302241e+003;
n=22; farx(n+1)=2.221492e+002; foe(n+1)=2.560435e+002; krok(n+1)=3.431867e-002; ng(n+1)=1.090553e+003;
n=23; farx(n+1)=1.165758e+002; foe(n+1)=2.179142e+002; krok(n+1)=4.438543e-002; ng(n+1)=1.059254e+003;
n=24; farx(n+1)=9.719218e+001; foe(n+1)=1.394612e+002; krok(n+1)=1.311129e-001; ng(n+1)=2.667940e+003;
n=25; farx(n+1)=9.381247e+001; foe(n+1)=1.211962e+002; krok(n+1)=1.596372e-002; ng(n+1)=4.001084e+003;
%odnowa zmiennej metryki
n=26; farx(n+1)=9.405594e+001; foe(n+1)=1.125779e+002; krok(n+1)=5.092199e-006; ng(n+1)=4.370088e+003;
n=27; farx(n+1)=9.764322e+001; foe(n+1)=1.083793e+002; krok(n+1)=1.953303e-005; ng(n+1)=1.883978e+003;
n=28; farx(n+1)=9.717667e+001; foe(n+1)=1.041269e+002; krok(n+1)=1.711903e-004; ng(n+1)=7.108279e+002;
n=29; farx(n+1)=4.840858e+001; foe(n+1)=7.152069e+001; krok(n+1)=1.072459e-003; ng(n+1)=6.992937e+002;
n=30; farx(n+1)=4.087624e+001; foe(n+1)=6.505547e+001; krok(n+1)=3.569431e-004; ng(n+1)=8.474167e+002;
n=31; farx(n+1)=3.015388e+001; foe(n+1)=5.648540e+001; krok(n+1)=2.488900e-003; ng(n+1)=1.196694e+003;
n=32; farx(n+1)=2.390103e+001; foe(n+1)=4.676061e+001; krok(n+1)=6.092969e-004; ng(n+1)=2.178485e+003;
n=33; farx(n+1)=2.344913e+001; foe(n+1)=4.559332e+001; krok(n+1)=5.309035e-004; ng(n+1)=1.469087e+003;
n=34; farx(n+1)=2.079073e+001; foe(n+1)=4.247881e+001; krok(n+1)=2.841023e-003; ng(n+1)=1.622528e+003;
n=35; farx(n+1)=1.855354e+001; foe(n+1)=3.884815e+001; krok(n+1)=3.581841e-003; ng(n+1)=2.576930e+003;
n=36; farx(n+1)=1.732461e+001; foe(n+1)=3.753607e+001; krok(n+1)=3.460440e-003; ng(n+1)=1.158418e+003;
n=37; farx(n+1)=1.479432e+001; foe(n+1)=3.485382e+001; krok(n+1)=1.033570e-002; ng(n+1)=1.607038e+003;
n=38; farx(n+1)=1.052621e+001; foe(n+1)=2.872755e+001; krok(n+1)=2.914778e-003; ng(n+1)=2.558761e+003;
n=39; farx(n+1)=1.007916e+001; foe(n+1)=2.827028e+001; krok(n+1)=8.713055e-004; ng(n+1)=6.474643e+002;
n=40; farx(n+1)=9.328809e+000; foe(n+1)=2.649550e+001; krok(n+1)=1.262969e-002; ng(n+1)=7.110833e+002;
n=41; farx(n+1)=8.857394e+000; foe(n+1)=2.457726e+001; krok(n+1)=2.080275e-002; ng(n+1)=3.301234e+002;
n=42; farx(n+1)=6.228780e+000; foe(n+1)=1.969954e+001; krok(n+1)=4.781642e-002; ng(n+1)=5.085473e+002;
n=43; farx(n+1)=5.301687e+000; foe(n+1)=1.857791e+001; krok(n+1)=4.438543e-002; ng(n+1)=4.435711e+002;
n=44; farx(n+1)=4.732461e+000; foe(n+1)=1.773242e+001; krok(n+1)=5.983917e-002; ng(n+1)=7.618365e+002;
n=45; farx(n+1)=3.413828e+000; foe(n+1)=1.546856e+001; krok(n+1)=7.224063e-002; ng(n+1)=9.022443e+002;
n=46; farx(n+1)=2.832567e+000; foe(n+1)=1.408800e+001; krok(n+1)=1.913888e-001; ng(n+1)=2.434295e+003;
n=47; farx(n+1)=2.916250e+000; foe(n+1)=1.349855e+001; krok(n+1)=7.727538e-002; ng(n+1)=2.058838e+003;
n=48; farx(n+1)=2.422546e+000; foe(n+1)=1.096950e+001; krok(n+1)=4.536903e-001; ng(n+1)=1.871837e+003;
n=49; farx(n+1)=2.218274e+000; foe(n+1)=9.047345e+000; krok(n+1)=3.329123e-001; ng(n+1)=4.560177e+002;
n=50; farx(n+1)=1.577857e+000; foe(n+1)=7.677860e+000; krok(n+1)=4.968529e-001; ng(n+1)=6.839779e+002;
%odnowa zmiennej metryki
n=51; farx(n+1)=1.580675e+000; foe(n+1)=7.617622e+000; krok(n+1)=4.158459e-006; ng(n+1)=4.891239e+002;
n=52; farx(n+1)=1.586092e+000; foe(n+1)=7.567945e+000; krok(n+1)=2.122479e-005; ng(n+1)=1.737853e+002;
n=53; farx(n+1)=1.583218e+000; foe(n+1)=7.512140e+000; krok(n+1)=6.524052e-005; ng(n+1)=1.174279e+002;
n=54; farx(n+1)=1.468069e+000; foe(n+1)=7.309641e+000; krok(n+1)=7.394073e-004; ng(n+1)=7.153010e+001;
n=55; farx(n+1)=1.294129e+000; foe(n+1)=6.723636e+000; krok(n+1)=8.684522e-004; ng(n+1)=1.203399e+002;
n=56; farx(n+1)=1.137561e+000; foe(n+1)=6.306390e+000; krok(n+1)=3.751501e-003; ng(n+1)=3.387827e+002;
n=57; farx(n+1)=9.811904e-001; foe(n+1)=5.856107e+000; krok(n+1)=1.053841e-002; ng(n+1)=4.382728e+002;
n=58; farx(n+1)=9.372999e-001; foe(n+1)=5.476735e+000; krok(n+1)=6.832143e-003; ng(n+1)=2.369418e+002;
n=59; farx(n+1)=9.333226e-001; foe(n+1)=5.322651e+000; krok(n+1)=1.078226e-003; ng(n+1)=8.060780e+002;
n=60; farx(n+1)=9.071913e-001; foe(n+1)=5.051578e+000; krok(n+1)=7.088910e-003; ng(n+1)=2.547296e+002;
n=61; farx(n+1)=8.810276e-001; foe(n+1)=4.797835e+000; krok(n+1)=8.891335e-003; ng(n+1)=2.704239e+002;
n=62; farx(n+1)=8.282715e-001; foe(n+1)=4.452179e+000; krok(n+1)=1.195410e-002; ng(n+1)=2.895630e+002;
n=63; farx(n+1)=8.187495e-001; foe(n+1)=4.347874e+000; krok(n+1)=1.283974e-002; ng(n+1)=3.051545e+002;
n=64; farx(n+1)=8.164343e-001; foe(n+1)=4.089348e+000; krok(n+1)=1.761298e-002; ng(n+1)=4.726643e+002;
n=65; farx(n+1)=8.333744e-001; foe(n+1)=3.719276e+000; krok(n+1)=1.254000e-001; ng(n+1)=3.742462e+002;
n=66; farx(n+1)=8.478741e-001; foe(n+1)=3.530493e+000; krok(n+1)=1.109636e-002; ng(n+1)=8.032879e+002;
n=67; farx(n+1)=8.744574e-001; foe(n+1)=3.483069e+000; krok(n+1)=3.556534e-002; ng(n+1)=1.601835e+002;
n=68; farx(n+1)=8.909052e-001; foe(n+1)=3.376789e+000; krok(n+1)=2.792385e-002; ng(n+1)=2.373088e+002;
n=69; farx(n+1)=1.010877e+000; foe(n+1)=3.096764e+000; krok(n+1)=7.424094e-002; ng(n+1)=4.209288e+002;
n=70; farx(n+1)=8.613648e-001; foe(n+1)=2.961554e+000; krok(n+1)=9.714883e-002; ng(n+1)=1.901576e+002;
n=71; farx(n+1)=8.159138e-001; foe(n+1)=2.730079e+000; krok(n+1)=5.155493e-001; ng(n+1)=3.562033e+002;
n=72; farx(n+1)=8.991431e-001; foe(n+1)=2.591557e+000; krok(n+1)=3.873041e-001; ng(n+1)=4.782019e+001;
n=73; farx(n+1)=8.888247e-001; foe(n+1)=2.392324e+000; krok(n+1)=3.854790e-001; ng(n+1)=7.240300e+002;
n=74; farx(n+1)=9.140570e-001; foe(n+1)=2.320293e+000; krok(n+1)=1.989372e-001; ng(n+1)=5.704394e+002;
n=75; farx(n+1)=8.653860e-001; foe(n+1)=1.928751e+000; krok(n+1)=9.087851e-001; ng(n+1)=5.519964e+002;
%odnowa zmiennej metryki
n=76; farx(n+1)=8.634096e-001; foe(n+1)=1.914186e+000; krok(n+1)=4.999771e-006; ng(n+1)=2.149266e+002;
n=77; farx(n+1)=8.624416e-001; foe(n+1)=1.899948e+000; krok(n+1)=3.533269e-006; ng(n+1)=2.381585e+002;
n=78; farx(n+1)=8.581903e-001; foe(n+1)=1.832448e+000; krok(n+1)=1.012576e-004; ng(n+1)=1.039838e+002;
n=79; farx(n+1)=8.532241e-001; foe(n+1)=1.816085e+000; krok(n+1)=1.764835e-004; ng(n+1)=4.259665e+001;
n=80; farx(n+1)=8.599392e-001; foe(n+1)=1.739558e+000; krok(n+1)=3.428360e-004; ng(n+1)=6.290362e+001;
n=81; farx(n+1)=8.622352e-001; foe(n+1)=1.719255e+000; krok(n+1)=2.774090e-003; ng(n+1)=5.071335e+001;
n=82; farx(n+1)=8.663207e-001; foe(n+1)=1.680921e+000; krok(n+1)=3.973596e-003; ng(n+1)=7.461281e+001;
n=83; farx(n+1)=8.722520e-001; foe(n+1)=1.636292e+000; krok(n+1)=8.580693e-003; ng(n+1)=1.065747e+002;
n=84; farx(n+1)=8.374466e-001; foe(n+1)=1.610925e+000; krok(n+1)=9.513276e-003; ng(n+1)=3.855591e+002;
n=85; farx(n+1)=7.330419e-001; foe(n+1)=1.564516e+000; krok(n+1)=3.281725e-002; ng(n+1)=4.289559e+002;
n=86; farx(n+1)=6.535391e-001; foe(n+1)=1.512146e+000; krok(n+1)=1.980819e-002; ng(n+1)=2.917833e+002;
n=87; farx(n+1)=6.187291e-001; foe(n+1)=1.466315e+000; krok(n+1)=2.339865e-002; ng(n+1)=3.962566e+002;
n=88; farx(n+1)=5.532990e-001; foe(n+1)=1.398522e+000; krok(n+1)=3.598781e-002; ng(n+1)=3.862615e+002;
n=89; farx(n+1)=5.580773e-001; foe(n+1)=1.390825e+000; krok(n+1)=5.682045e-003; ng(n+1)=1.182072e+002;
n=90; farx(n+1)=5.388154e-001; foe(n+1)=1.366873e+000; krok(n+1)=2.165649e-002; ng(n+1)=1.866965e+002;
n=91; farx(n+1)=5.594515e-001; foe(n+1)=1.317818e+000; krok(n+1)=3.360874e-002; ng(n+1)=1.768977e+002;
n=92; farx(n+1)=5.510121e-001; foe(n+1)=1.251307e+000; krok(n+1)=2.012417e-001; ng(n+1)=1.318062e+002;
n=93; farx(n+1)=4.726380e-001; foe(n+1)=1.191048e+000; krok(n+1)=6.442938e-002; ng(n+1)=1.343481e+002;
n=94; farx(n+1)=4.016180e-001; foe(n+1)=1.123248e+000; krok(n+1)=5.671128e-002; ng(n+1)=3.756951e+002;
n=95; farx(n+1)=3.874532e-001; foe(n+1)=1.098907e+000; krok(n+1)=4.725510e-002; ng(n+1)=4.476779e+002;
n=96; farx(n+1)=2.628926e-001; foe(n+1)=9.460245e-001; krok(n+1)=6.128735e-001; ng(n+1)=1.864936e+002;
n=97; farx(n+1)=2.268542e-001; foe(n+1)=8.750356e-001; krok(n+1)=1.189066e-001; ng(n+1)=2.479216e+002;
n=98; farx(n+1)=1.823670e-001; foe(n+1)=7.622509e-001; krok(n+1)=4.268310e-001; ng(n+1)=2.809484e+002;
n=99; farx(n+1)=1.852532e-001; foe(n+1)=7.020716e-001; krok(n+1)=2.442288e-001; ng(n+1)=2.931958e+002;
n=100; farx(n+1)=1.955194e-001; foe(n+1)=6.841431e-001; krok(n+1)=5.694364e-002; ng(n+1)=2.718532e+002;

figure; semilogy(farx,'b'); hold on; semilogy(foe,'r'); xlabel('Iteracje'); ylabel('Earx, Eoe'); legend('Earx','Eoe'); title('Uczenie predyktora OE');
figure; subplot(2,1,1); semilogy(krok); xlabel('Iteracje'); ylabel('Krok');
subplot(2,1,2); semilogy(ng); xlabel('Iteracje'); ylabel('Norma gradientu');
Earx=farx(n+1)
Eoe=foe(n+1)
